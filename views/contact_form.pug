extends layout

block content
    div.main
        div.spacer 
        unless errors 
            include ./form_hero.pug
        if errors 
            ul 
                for error in errors 
                    li!= error.msg 
        form(method='POST' action='' novalidate)
            div.form-group
                div.section-title CONTACT NAME
                div.input-group
                    input(type='text' placeholder="e.g., John and Jane Smith" name="familyName" value=(guest ? guest.family_name : '' ) required="true" id="familyName")
                    span.error
            div.form-group
                div.section-title MAILING ADDRESS
                div.input-group
                    select(name="country" id="country")
                        each country in country_list
                            if guest 
                                if country.name===guest.address.country
                                    option(value= country.name selected) #{country.name}
                                else 
                                    option(value= country.name) #{country.name}
                            else 
                                if country.name==="United States"
                                    option(value= country.name selected) #{country.name}
                                else
                                    option(value= country.name) #{country.name}
                div.input-group
                    input(id="streetAddress" type='text', placeholder="Street Address", name="streetAddress" value=(guest ? guest.address.streetAddress : '') required="true")
                    span.error
                div.input-group
                    input(id="city" type='text', placeholder="City", name="city", value=(guest ? guest.address.city : '') required="true")
                    span.error
                div.input-group
                    input(id="state" type='text', placeholder="State / Province", name="state" value=(guest ? guest.address.state : ''))
                    span.error
                div.input-group
                    input(id="zip" type='text', placeholder="Zip / Postal Code", name="zip", value=(guest ? guest.address.zip : ''))
                    span.error
            div.form-group
                div.section-title HOUSEHOLD MEMBERS
                div#members-container
                    input(type="hidden" id="memberCounter" name="memberCounter" value=(guest ? guest.memberCount : 1))
                    - var memberCount = (guest ? guest.memberCount : 1)
                    - var n = 0;
                    while n < memberCount
                        div(id= `member${n}`).member
                            input(type='text', placeholder="First Name", name=`firstName${n}`).member-input
                            input(type='text', placeholder="Last Name", name=`lastName${n}`).member-input
                            input(type='tel', placeholder="Phone Number", name=`phone${n}`).member-input
                            input(type='email', placeholder="Email", name=`email${n}`).member-input
                            div#birthday-group 
                                div#birthday-label Birthday
                                div#birthday-input
                                    select(name=`month${n}`).member-input
                                        option(disabled selected hidden) Month
                                        option(value="January") January
                                        option(value="February") February
                                    select(name=`day${n}`).member-input
                                        option(disabled selected hidden) Day
                                        option(value="6") 6  
                            div.divider   
                        - n++    
                button(type="button" onclick='addMember()').text-button + ADD ANOTHER PERSON
            button(type="submit") SAVE
            div.member.hidden#memberTemplate
                input(type='text', placeholder="First Name", name="firstName").member-input
                input(type='text', placeholder="Last Name", name="lastName").member-input
                input(type='tel', placeholder="Phone Number", name="phone").member-input
                input(type='email', placeholder="Email", name="email").member-input
                div#birthday-group 
                    div#birthday-label Birthday
                    div#birthday-input
                        select(name=`month`).member-input
                            option(disabled selected hidden) Month
                            option(value="January") January
                            option(value="February") February
                        select(name=`day`).member-input
                            option(disabled selected hidden) Day
                            option(value="6") 6  

